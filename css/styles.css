
:root{
  --bg:#0b1220;
  --panel:#111a2b;
  --panel-2:#0f1828;
  --text:#e6edf3;
  --muted:#9ab;
  --gain:#2ad27f;
  --loss:#d84f4f;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:radial-gradient(1000px 600px at 20% -10%, #142034, transparent 60%),
             radial-gradient(900px 500px at 120% 10%, #0c1526, transparent 50%),
             var(--bg);
  color:var(--text);
  font:400 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
}

.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

.app-header, .app-footer{
  display:flex; align-items:center; justify-content:space-between;
  gap:1rem; padding:1rem clamp(1rem, 4vw, 2rem);
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
  border-bottom:1px solid rgba(255,255,255,.06);
}
.app-header h1{font-size:clamp(1.1rem, 2.4vw, 1.6rem); margin:0}
.app-footer{opacity:.7; font-size:.875rem}

.controls select{
  background:var(--panel);
  color:var(--text);
  border:1px solid rgba(255,255,255,.08);
  border-radius:.6rem;
  padding:.6rem .8rem;
  outline: none;
}
.controls select:focus{box-shadow:0 0 0 3px rgba(99, 179, 237, .35)}

.container{padding:1rem clamp(1rem,4vw,2rem) 2rem}

.board-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:14px;
}

.card{
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  padding:14px;
  position:relative;
  transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
  outline:none;
  text-decoration:none; color:inherit;
}
.card:hover, .card:focus{ transform: translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,.35); border-color:rgba(255,255,255,.18)}

.card .row{display:flex; align-items:center; gap:.8rem}
.card img{width:40px;height:40px;border-radius:50%; flex:0 0 auto; border:1px solid rgba(255,255,255,.12)}
.card .name{font-weight:600}
.card .meta{margin-top:.4rem; display:flex; align-items:baseline; justify-content:space-between; gap:.5rem; color:var(--muted)}
.card .mcap{font-weight:600; color:#cfe8ff}
.card .pct{font-weight:700}
.card.gain .pct{color:var(--gain)}
.card.loss .pct{color:var(--loss)}

.card.gain{background-image: radial-gradient(120px 60px at 85% -10%, rgba(42,210,127,.18), transparent 60%);}
.card.loss{background-image: radial-gradient(120px 60px at 85% -10%, rgba(216,79,79,.18), transparent 60%);}

/* --- RACE PAGE --- */
.race-layout{
  display:grid; gap:14px;
  grid-template-columns: 220px 1fr 320px;
  padding:1rem clamp(1rem,4vw,2rem) 2rem;
}
@media (max-width: 1024px){
  .race-layout{ grid-template-columns: 1fr; }
  .race-rail{ order: -1; display:flex; align-items:center; gap:12px; overflow:auto; padding-bottom:.5rem}
}
.race-rail{
  background:var(--panel-2);
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px; padding:14px;
}
.rail-title{font-size:.9rem; letter-spacing:.08em; color:#9bb; margin-bottom:.5rem}
.rail-buttons{display:flex; flex-direction:column; gap:8px}
@media (max-width: 1024px){ .rail-buttons{ flex-direction:row } }
.rail-btn{
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
  border:1px solid rgba(255,255,255,.10);
  color:var(--text);
  border-radius:10px;
  padding:.6rem .9rem;
  cursor:pointer;
}
.rail-btn:hover, .rail-btn:focus{outline:none; box-shadow:0 0 0 3px rgba(99, 179, 237, .35)}
.rail-btn.active{border-color:#7ae6b0; box-shadow:0 0 0 2px rgba(42,210,127,.45) inset}

.race-chart{
  position:relative; min-height: 72vh;
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  overflow:hidden;
}
.chart-track{ position:absolute; inset:14px; border-radius:10px;
  background:
    repeating-linear-gradient(to right, rgba(255,255,255,.05) 0 1px, transparent 1px 10%),
    radial-gradient(200px 40px at 50% -5%, rgba(42,210,127,.1), transparent 60%);
}
.bubbles{ position:absolute; inset:10px; }
.bubble{
  position:absolute; display:flex; align-items:center; justify-content:center;
  width:56px; height:56px; border-radius:50%;
  background:#0f1828; border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
  transition: transform .15s ease;
}
.bubble:hover, .bubble:focus{ transform: translateY(-4px) scale(1.03); outline:none; }
.bubble img{width:100%; height:100%; border-radius:50%}
.bubble.gain{ box-shadow: 0 0 0 2px rgba(42,210,127,.55), 0 12px 26px rgba(0,0,0,.45); }
.bubble.loss{ box-shadow: 0 0 0 2px rgba(216,79,79,.55), 0 12px 26px rgba(0,0,0,.45); }
.bubble .tag{ position:absolute; top:62px; white-space:nowrap; font-size:.78rem; color:#cfe8ff; text-shadow:0 1px 1px #0008 }
.bubble .tag .pct{ font-weight:700; margin-left:.35rem; }
.bubble.reached{ animation: pulse 1.4s infinite; }
@keyframes pulse{
  0%{ box-shadow:0 0 0 2px rgba(122,230,176,.7), 0 12px 26px rgba(0,0,0,.45) }
  100%{ box-shadow:0 0 0 12px rgba(122,230,176,0), 0 12px 26px rgba(0,0,0,.45) }
}

.tooltip{ position:absolute; padding:.5rem .6rem; background:#0b1220; border:1px solid rgba(255,255,255,.2); border-radius:.6rem; font-size:.8rem; color:#dce9ff; pointer-events:none; transform: translate(-50%,-110%); }
.tooltip .muted{ color:#9ab }

/* leaderboard */
.race-leaderboard{
  background:var(--panel-2);
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px; padding:14px;
}
.lb-title{font-weight:600; margin-bottom:.6rem; color:#cfe8ff}
.lb-top3{ display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin-bottom:12px; }
.medal{
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0));
  border:1px solid rgba(255,255,255,.10); border-radius:12px;
  padding:.6rem; text-align:center; font-size:.86rem;
}
.medal.gold{ box-shadow: inset 0 0 0 2px rgba(255,215,0,.25) }
.medal.silver{ box-shadow: inset 0 0 0 2px rgba(192,192,192,.25) }
.medal.bronze{ box-shadow: inset 0 0 0 2px rgba(205,127,50,.25) }
.lb-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; max-height: 40vh; overflow:auto }
.lb-item{
  display:flex; align-items:center; justify-content:space-between;
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  border:1px solid rgba(255,255,255,.06); border-radius:10px; padding:.45rem .6rem;
  font-size:.9rem;
}
.lb-item .name{ color:#dfe9ff }
.lb-item .mcap{ color:#9bb }
.lb-item .pct{ font-weight:700 }
.lb-item .pct.gain{ color: var(--gain) }
.lb-item .pct.loss{ color: var(--loss) }

/* focus ring */
:focus-visible{ outline:3px solid rgba(99, 179, 237, .6); outline-offset:2px }
